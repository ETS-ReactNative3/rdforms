<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  </head>
  <body class="claro">
  <script>
      var dojoConfig = {
          async:true,
          packages: [
              { name: "rdforms", location: "../../" }]
      };
  </script>
  <script src="../libs/dojo/dojo.js"></script>
  <style>
      @import "../libs/dijit/themes/claro/claro.css";
      @import "../view/resources/rdforms.css";
  </style>
  <script type="text/javascript">
      require([
          'dojo/dom',
          'dojo/dom-style',
          'dojo/Deferred',
          'rdfjson/Graph',
          'rdforms/template/ItemStore',
          'rdforms/apps/LDBrowser',
            'dojo/domReady!'
      ], function(dom, domStyle, Deferred, Graph, ItemStore, LDBrowser) {

          //Initialize a store with a template, in real world scenarios templates are loaded rather than defined inline
          var itemStore = new ItemStore();
          itemStore.createItem({
              "type": "text",
              "nodetype": "LITERAL",
              "id": "ex:label",
              "property": "http://example.com/terms/label",
              "label": {"en": "Label"}
          });
          itemStore.createItem({
              "type": "text",
              "nodetype": "URI",
                "id": "ex:relation",
              "property": "http://example.com/terms/relation",
              "uriValueLabelProperties": ["http://example.com/terms/label"],
              "label": {"en": "Relation"}
            });
          itemStore.createItem({
              "type": "choice",
              "nodetype": "URI",
              "id": "ex:color",
              "property": "http://example.com/terms/color",
              "label": {"en": "Color"},
                "choices": [
                    { "value": "http://example.com/color/blue", "label": {"en": "Blue"}},
                    { "value": "http://example.com/color/red", "label": {"en": "Red"}}
                ],
              "cardinality": {"min": 1, "pref": 1, "max": 1}
          });
          itemStore.createItem({
              "type": "group",
              "id": "ex:allInOrder",
              "label": {"en": "Relations"},
              "items": [
                  {id: "ex:label"},
                  {id: "ex:relation"},
                  {id: "ex:color"}
              ]
          });

          //Create a RDF graph, in real world scenarios RDF are loaded rather than defined inline.
          var g = new Graph({
              "http://example.com/a": {
                  "http://www.w3.org/1999/02/22-rdf-syntax-ns#type": [{value: "http://example.com/terms/Thing", type: "uri"}],
                  "http://example.com/terms/label": [{value: "Individual A", type: "literal"}],
                  "http://example.com/terms/relation": [{value: "http://example.com/b", type: "uri"}],
                  "http://example.com/terms/color": [{value: "http://example.com/color/red", type: "uri"}],
              },
              "http://example.com/b": {
                  "http://example.com/terms/label": [{value: "Individual B", type: "literal"}],
                  "http://example.com/terms/color": [{value: "http://example.com/color/blue", type: "uri"}],
              },
                "http://example.com/color/red": {
                    "http://example.com/terms/label": [{value: "Red", type: "literal"}]
                },
              "http://example.com/color/blue": {
                  "http://example.com/terms/label": [{value: "Blue", type: "literal"}]
              }
          });

          //Init the LDBrowser, loadResource and suggestedTemplate are overridden to work with the template and RDF defined above
          //In real life scenarios a config file is given instead that tells which templates to load and how to load RDF via a cache.
          var ldp = new LDBrowser({
              itemStore: itemStore,
              initialURI: "http://example.com/a",
              loadResource: function(uri) {
                  var d = new Deferred();
                  d.resolve(g);
                  return d.promise;
              },
              suggestedTemplate: function(uri, graph) {
                  if (uri === "http://example.com/a") {
                      return ["ex:allInOrder"];
                  }
              }
          }, dom.byId("ldbrowser"));
          ldp.startup();
      });
  </script>
  <div id="ldbrowser"></div>
  </div>
  </body>
</html>